# Important Default

기본적으로 React Query는 **공격적이지만 정상적인 기본값**으로 구성됩니다. **때때로 이러한 기본값은 새로운 사용자를 방심케 하거나 사용자가 모르는 경우 학습/디버깅을 어렵게 만들 수 있습니다.** React Query를 계속 배우고 사용할 때 다음 사항을 염두에 두십시오 :

- `useQuery` 또는 `useInfiniteQuery`를 통한 쿼리 인스턴스는 기본적으로 **캐시된 데이터를 오래된 데이터**로 간주합니다.

> 이 동작을 변경하려면 `staleTime` 옵션을 사용하여 전역 및 쿼리별로 쿼리를 구성할 수 있습니다. 더 긴 `staleTime`을 지정하면 쿼리가 데이터를 자주 다시 가져오지 않습니다.

- 다음과 같은 경우 오래된 쿼리를 백그라운드에서 자동으로 다시 가져옵니다.
  - 쿼리 마운트의 새 인스턴스
  - 창이 다시 열렸을 때
  - 네트워크에 다시 연결됬을 때
  - 쿼리를 시간 간격으로 refetch 설정 했을 때.

예상하지 못한 refetch가 표시되면 방금 창에 초점을 맞추고 React Query가 `refetchOnWindowFocus`를 수행하고 있기 때문일 수 있습니다. 개발 중에는 특히 브라우저 DevTools와 앱 사이에 초점을 맞추면 fetch가 발생하기 때문에 이 작업이 더 자주 트리거될 수 있으므로 주의해야 합니다.

> 이 기능을 변경하려면 `refetchOnMount`, `refetchOnWindowFocus`, `refetchOnReconnect` 및 `refetchInterval`과 같은 옵션을 사용할 수 있습니다.

- `useQuery`, `useInfiniteQuery` 또는 쿼리 옵저버의 활성 인스턴스가 더 이상 없는 쿼리 결과는 "inactive"로 레이블이 지정되고 나중에 다시 사용할 경우를 대비하여 캐시에 남아 있습니다.
- 기본적으로 "inactive" 쿼리는 **5분** 후에 수집되는 garbage입니다.

> 이를 변경하려면 쿼리에 대한 기본 `cacheTime`을 `1000 * 60 * 5`밀리초가 아닌 다른 값으로 변경할 수 있습니다.

- 실패한 쿼리는 **자동으로 3회 재시도**되며 UI에 오류를 캡처하고 표시하기 전에 **exponential backoff delay**가 발생합니다.

> 이를 변경하려면 쿼리에 대한 기본 `retry` 및 `retryDelay` 옵션을 `3`과 기본 exponential backoff function이 아닌 다른 것으로 변경할 수 있습니다.

- 쿼리 결과는 기본적으로 **구조적으로 공유되어 데이터가 실제로 변경되었는지 감지하고** 변경되지 않은 경우 **데이터 참조가 변경되지 않은 상태로 유지**되어 useMemo 및 useCallback과 관련된 값의 안정화에 더 도움이 됩니다. 이 개념이 생소하게 들린다면 걱정하지 마세요! 99.9%의 경우 이 기능을 비활성화할 필요가 없으며 비용 없이 앱의 성능이 향상됩니다.

> 구조적 공유는 JSON 호환 값에서만 작동하며 다른 모든 값 유형은 항상 변경된 것으로 간주됩니다. 예를 들어 많은 응답으로 인해 성능 문제가 발생하는 경우 `config.structuralSharing` 플래그를 사용하여 이 기능을 비활성화할 수 있습니다. 쿼리 응답에서 JSON과 호환되지 않는 값을 처리하고 데이터가 변경되었는지 여부를 여전히 감지하려는 경우 `config.isDataEqual`을 사용하여 데이터 비교 함수를 정의할 수 있습니다.
